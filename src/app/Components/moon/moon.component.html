<!--  -->
<div class="relative h-[90vh]">
    <img 
    src="https://spaceplace.nasa.gov/review/moon-phases/moon-phases.en.gif"
    class="absolute inset-0 w-full h-full object-cover z-0"
    alt="Background"
  />
</div>

<div class="px-4 py-8 bg-white text-black my-8 rounded-lg shadow-md  ">
    
    <div class="flex flex-col items-center gap-4">
      <h2 class="text-4xl font-bold">Moon Phases</h2>
      <p class="mx-[10%]"> If you have looked into the night sky, you may have noticed the Moon appears to change shape each night. Some nights, the Moon might look like a narrow crescent.
         Other nights, the Moon might look like a bright circle. And on other nights, you might not be able to see the Moon at all. 
         The different shapes of the Moon that we see at different times of the month are called the Moon’s phases.</p>

      <div class="bg-transparent max-w-sm mx-auto my-8 w-full flex justify-between" >
        <img
          src="moonPhases-nobg.png"
          [ngClass]="'object-cover transition-transform duration-300 origin-center w-full h-auto mb-[350px] md:mb-0 ' + activeStyle"
          alt="Moon Phases"
        />
        <div
          [ngClass]="isMoonPhaseSelected ? 'moonInfoIntro' : 'moonInfoOutro'"
          class="absolute right-0 w-full max-w-md h-[750px] bg-gradient-to-b from-gray-900/80 to-gray-800/90 text-white rounded-l-2xl shadow-2xl overflow-y-auto backdrop-blur-md mb-[350px] md:mb-0"
        >
          <img
            [src]="selectedMoonPhaseInfo.imgSrc || ''"
            alt="Moon Phase"
            class="w-full h-[280px] object-cover rounded-tl-2xl brightness-75 shadow-inner"
          />

          <h2 class="text-3xl font-semibold text-center my-6 tracking-wide">
            {{ selectedMoonPhaseInfo.label || 'Unknown Phase' }}
          </h2>

          <p class="text-gray-300 text-sm lg:text-base text-center px-6 leading-relaxed">
            {{ selectedMoonPhaseInfo.description || 'No description available.' }}
          </p>

          <div class="mt-6 px-6">
            <ul class="space-y-4 bg-white/5 p-6 rounded-xl shadow-inner backdrop-blur-md">
              <li class="flex items-center gap-4">
                <i class="fa-solid fa-bolt text-yellow-300 text-lg rotate-[-15deg]"></i>
                <span class="text-sm">Energy: {{ selectedMoonPhaseInfo.energy || 'N/A' }}</span>
              </li>
              <li class="flex items-center gap-4">
                <i class="fa-solid fa-moon text-blue-300 text-lg"></i>
                <span class="text-sm">Visibility: {{ selectedMoonPhaseInfo.visibility || 'N/A' }}</span>
              </li>
              <li class="flex items-center gap-4">
                <i class="fa-solid fa-arrow-right text-purple-300 text-lg"></i>
                <span class="text-sm">Next Phase: {{ selectedMoonPhaseInfo.nextPhase || 'N/A' }}</span>
              </li>
            </ul>
          </div>
        </div>


      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 p-4 mr-8">
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(0)"
        [ngClass]="targetedMoonPhase === 0 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://assets.science.nasa.gov/dynamicimage/assets/science/psd/lunar-science/internal_resources/366/new-moon.jpg?w=640&h=613&fit=clip&crop=faces%2Cfocalpoint" alt="New Moon" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">New Moon</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(1)"
        [ngClass]="targetedMoonPhase === 1 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://assets.science.nasa.gov/dynamicimage/assets/science/psd/lunar-science/internal_resources/368/waxing-crescent.jpg?w=640&h=613&fit=clip&crop=faces%2Cfocalpoint" alt="Waxing Crescent" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">Waxing Crescent</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(2)"
        [ngClass]="targetedMoonPhase === 2 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://assets.science.nasa.gov/dynamicimage/assets/science/psd/lunar-science/internal_resources/367/first-quarter.jpg?w=640&h=613&fit=clip&crop=faces%2Cfocalpoint" alt="First Quarter" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">First Quarter</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(3)"
        [ngClass]="targetedMoonPhase === 3 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://assets.science.nasa.gov/dynamicimage/assets/science/psd/lunar-science/internal_resources/365/waxing-gibbous.jpg?w=640&h=613&fit=clip&crop=faces%2Cfocalpoint" alt="Waxing Gibbous" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">Waxing Gibbous</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(4)"
        [ngClass]="targetedMoonPhase === 4 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://science.nasa.gov/wp-content/uploads/2023/08/full.jpg" alt="Full Moon" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">Full Moon</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(5)"
        [ngClass]="targetedMoonPhase === 5 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
            <img src="https://science.nasa.gov/wp-content/uploads/2023/08/waning-gibbous.jpg" alt="Third Quarter" class="w-16 h-16 object-contain" />
            <p class="mt-2 text-sm font-semibold">Waning Gibbous</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(6)"
        [ngClass]="targetedMoonPhase === 6 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
            <img src="https://science.nasa.gov/wp-content/uploads/2023/08/third-quarter.jpg" alt="Waning Gibbous" class="w-16 h-16 object-contain" />
            <p class="mt-2 text-sm font-semibold">Third Quarter</p>
        </div>
        <div class="bg-white/80 p-4 rounded-lg shadow hover:shadow-lg transition cursor-pointer border-2 border-transparent flex flex-col items-center"
        (click)="targetMoonPhaseCard(7)"
        [ngClass]="targetedMoonPhase === 7 ? 'moonPhaseCardActive' : isMoonPhaseSelected ? '' : ''">
          <img src="https://science.nasa.gov/wp-content/uploads/2023/08/waning-crescent.jpg" alt="Waning Crescent" class="w-16 h-16 object-contain" />
          <p class="mt-2 text-sm font-semibold">Waning Crescent</p>
        </div>
      </div>
    </div>
  </div>

<div class="flex justify-center p-8 "> 
    <form  #form="ngForm" class="flex flex-col justify-center gap-4">
            <div class="text-red-400 text-sm md:text-base mt-1" *ngIf="inputedCityRef.touched && inputedCityRef.invalid">
                <span *ngIf="inputedCityRef.errors?.['required']">🚩 City Is Required.</span>
            </div>
            <input 
            #inputedCityRef="ngModel"
            type="text" 
            name="selectedCity"
            [(ngModel)]="selectedCity"
            required
            placeholder="City"
            class="bg-gray-700 border-b-1 rounded border-gray-100 text-white placeholder-gray-500 py-2 px-3 text-sm lg:text-base 
            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">

            <button 
            (click)="getCurrentMoonPhase(selectedCity)"
            class="bg-white text-blue-600 mt-6 py-2 px-6 rounded-full text-lg font-semibold shadow-md hover:bg-gray-100 transition-all duration-300 
            focus:outline-none focus:ring-1 focus:ring-blue-500 focus:ring-opacity-50 relative cursor-pointer hover:opacity-90">
                 View Moon Phase Info
                <i class="fa-solid fa-eye"></i>
          </button>    
          </form>
        </div>
        <div *ngIf="currentLocName" class="mb-8 text-center relative max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto p-6 sm:p-8 rounded-2xl backdrop-blur-md shadow-2xl bg-gradient-to-br from-[#1a1c2c] to-[#3c4059] border border-white/10 text-white">
          <h2 class="text-xl sm:text-2xl font-semibold mb-2 tracking-wide">🌙 Moon Phase - {{currentLocName}}, {{currentCountry}}</h2>
          
          <p class="text-lg sm:text-xl font-bold text-purple-200">Waning Gibbous</p>
          <p class="text-sm sm:text-base text-gray-300 mb-4">💡 99% illuminated</p>
        
          <div class="text-sm sm:text-base space-y-1 font-light">
            <p>🌅 <span class="text-gray-400">Sunrise:</span> 06:22 AM</p>
            <p>🌇 <span class="text-gray-400">Sunset:</span> 07:41 PM</p>
            <p>🌙 <span class="text-gray-400">Moonrise:</span> 09:22 PM</p>
            <p>🌄 <span class="text-gray-400">Moonset:</span> 06:39 AM</p>
          </div>
        
          <div class="mt-5 text-xs sm:text-sm text-gray-400 italic">
            <p>🔭 The moon is currently below the horizon.</p>
            <p>☀️ The sun is still shining.</p>
          </div>
        
          <div class="absolute inset-0 bg-white/5 rounded-2xl pointer-events-none"></div>
        </div>
